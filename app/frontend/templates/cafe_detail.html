<!DOCTYPE html>
<html>
<head>
  <title>{{ cafe.name }} - Details</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    .cafe-info { margin-bottom: 30px; }
    .review-card { border: 1px solid #ddd; padding: 15px; margin-bottom: 15px; border-radius: 6px; }
    .review-header { font-weight: bold; }
    .rating { color: goldenrod; }
    form { margin-top: 30px; border-top: 2px solid #eee; padding-top: 20px; }
    label { display: block; margin-top: 10px; }
    input, textarea, select { width: 100%; padding: 8px; margin-top: 4px; }
    button { margin-top: 15px; padding: 10px 15px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; }
    button:hover { background: #0056b3; }
  </style>
</head>
<body>
  <h1>{{ cafe.name }}</h1>
  <div class="cafe-info">
    <p><strong>Address:</strong> {{ cafe.address }}</p>
    <p><strong>Brew Methods:</strong> {{ cafe.brew_methods or "N/A" }}</p>
  </div>

  <h2>Reviews</h2>
  {% if cafe.reviews %}
    {% for review in cafe.reviews %}
      <div class="review-card">
        <div class="review-header">
          {{ review.reviewer_name }} - 
          <span class="rating">⭐ {{ review.rating }}/5</span>
        </div>
        {% if review.brew_method %}
          <p><strong>Brew Method:</strong> {{ review.brew_method }}</p>
        {% endif %}
        {% if review.roast_notes %}
          <p><strong>Roast Notes:</strong> {{ review.roast_notes }}</p>
        {% endif %}
        {% if review.review_text %}
          <p>{{ review.review_text }}</p>
        {% endif %}
      </div>
    {% endfor %}
  {% else %}
    <p>No reviews yet. Be the first to review this café!</p>
  {% endif %}

  <h2>Leave a Review</h2>
  <form action="/reviews/create" method="post">
    <input type="hidden" name="cafe_id" value="{{ cafe.id }}">
    
    <label for="reviewer_name">Your Name:</label>
    <input type="text" id="reviewer_name" name="reviewer_name" required>
    
    <label for="rating">Rating (1–5):</label>
    <select id="rating" name="rating" required>
      <option value="">--Select--</option>
      {% for r in range(1,6) %}
        <option value="{{ r }}">{{ r }}</option>
      {% endfor %}
    </select>
    
    <label for="brew_method">Brew Method:</label>
    <input type="text" id="brew_method" name="brew_method" placeholder="e.g. V60, Espresso">
    
    <label for="roast_notes">Roast Notes:</label>
    <input type="text" id="roast_notes" name="roast_notes" placeholder="Fruity, Nutty, Chocolatey">
    
    <label for="review_text">Your Review:</label>
    <textarea id="review_text" name="review_text" rows="4"></textarea>
    
    <button type="submit">Submit Review</button>
  </form>

  <br>
  <a href="/cafes/list">⬅ Back to Café List</a>
</body>
</html>
